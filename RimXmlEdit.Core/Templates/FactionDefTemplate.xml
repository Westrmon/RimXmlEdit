<?xml version="1.0" encoding="utf-8"?>
<Defs xmlns:meta="RimXmlEdit.Template"
    meta:defType="FactionDef">

    <!-- ========================= -->
    <!--        过滤器定义区        -->
    <!-- ========================= -->
    <meta:FilterDefs>
        <meta:Filter Name="IsHumanlikeFaction" Desc="是否为人形派系（人类可加入/互动）" />
        <meta:Filter Name="IsMechanoidFaction" Desc="是否为机械体派系（无外交、不可交易）" />
        <meta:Filter Name="IsTribal" Desc="是否为部落派系（科技等级低）" />
        <meta:Filter Name="IsOutlander" Desc="是否为外来者派系（科技等级中等）" />
        <meta:Filter Name="IsPirate" Desc="是否为海盗派系（通常敌对）" />
        <meta:Filter Name="IsHostile" Desc="是否为敌对派系（必须敌对或初始敌对）" />
    </meta:FilterDefs>

    <!-- ========================= -->
    <!--       FactionDef 模板      -->
    <!-- ========================= -->
    <FactionDef meta:Name="CustomFaction"
        meta:Desc="自定义派系模板（可配置部落/外来者/海盗/机械体派系逻辑）">

        <!-- 基础信息 -->
        <defName>MyCustomFaction</defName>
        <label>custom faction</label>
        <description>这是一个可配置的派系模板。</description>

        <!-- 科技等级 -->
        <techLevel meta:If="IsTribal">Neolithic</techLevel>
        <techLevel meta:If="IsOutlander">Industrial</techLevel>
        <techLevel meta:If="IsPirate">Spacer</techLevel>
        <techLevel meta:If="IsMechanoidFaction">Ultra</techLevel>
        <techLevel meta:Unless="IsTribal|IsOutlander|IsPirate|IsMechanoidFaction">Industrial</techLevel>

        <!-- 是否为人形派系 -->
        <humanlikeFaction meta:If="IsHumanlikeFaction">true</humanlikeFaction>
        <humanlikeFaction meta:If="IsMechanoidFaction">false</humanlikeFaction>

        <!-- 允许到达温度范围 -->
        <allowedArrivalTemperatureRange>
            <min>-40</min>
            <max>50</max>
        </allowedArrivalTemperatureRange>

        <!-- ========================= -->
        <!--          派系关系          -->
        <!-- ========================= -->

        <baseGoodwill meta:If="IsPirate">-70</baseGoodwill>
        <baseGoodwill meta:If="IsHostile">-100</baseGoodwill>
        <baseGoodwill meta:Unless="IsHostile|IsPirate">0</baseGoodwill>

        <naturalColonyGoodwill meta:If="IsPirate">-50</naturalColonyGoodwill>
        <naturalColonyGoodwill meta:Unless="IsPirate">5</naturalColonyGoodwill>

        <canBeHostileFromDamage meta:If="IsHumanlikeFaction">true</canBeHostileFromDamage>
        <canBeHostileFromDamage meta:If="IsMechanoidFaction">false</canBeHostileFromDamage>

        <mustStartHostile meta:If="IsHostile">true</mustStartHostile>
        <mustStartHostile meta:Unless="IsHostile">false</mustStartHostile>

        <!-- ========================= -->
        <!--         生成设置           -->
        <!-- ========================= -->

        <settlementGenerationWeight>
            <Base>1.0</Base>
        </settlementGenerationWeight>

        <!-- 派系基本成员类型 -->
        <basicMemberKind meta:If="IsTribal">Tribal_Pawn</basicMemberKind>
        <basicMemberKind meta:If="IsOutlander">Outlander_Pawn</basicMemberKind>
        <basicMemberKind meta:If="IsPirate">Pirate_Pawn</basicMemberKind>
        <basicMemberKind meta:If="IsMechanoidFaction">Mechanoid</basicMemberKind>

        <pawnsCanGenerateWithWeapons meta:If="IsHumanlikeFaction">true</pawnsCanGenerateWithWeapons>
        <pawnsCanGenerateWithWeapons meta:If="IsTribal">false</pawnsCanGenerateWithWeapons>
        <pawnsCanGenerateWithWeapons meta:If="IsMechanoidFaction">true</pawnsCanGenerateWithWeapons>

        <requiredCountAtGameStart meta:If="IsMechanoidFaction">0</requiredCountAtGameStart>
        <requiredCountAtGameStart meta:Unless="IsMechanoidFaction">1</requiredCountAtGameStart>

        <!-- ========================= -->
        <!--         外交与交易         -->
        <!-- ========================= -->

        <canSpawnPawnGroups>
            <li meta:If="IsHumanlikeFaction">true</li>
            <li meta:If="IsMechanoidFaction">true</li>
        </canSpawnPawnGroups>

        <caravanTraderKinds meta:If="IsHumanlikeFaction">
            <li>Caravan_trader</li>
        </caravanTraderKinds>

        <visitorTraderKinds meta:If="IsOutlander">
            <li>Visitor_trader</li>
        </visitorTraderKinds>

        <permanentTraderKinds meta:If="IsOutlander">
            <li>Base_PermanentTrader</li>
        </permanentTraderKinds>

        <!-- ========================= -->
        <!--        派系特有内容         -->
        <!-- ========================= -->

        <apparelTags meta:If="IsTribal">
            <li>Tribal</li>
        </apparelTags>

        <apparelTags meta:If="IsOutlander">
            <li>Outlander</li>
        </apparelTags>

        <apparelTags meta:If="IsPirate">
            <li>Pirate</li>
        </apparelTags>

        <weaponTags meta:If="IsOutlander">
            <li>Gun</li>
        </weaponTags>

        <weaponTags meta:If="IsPirate">
            <li>PirateGun</li>
        </weaponTags>

        <drugPolicy meta:If="IsTribal">TribalDrugPolicy</drugPolicy>
        <drugPolicy meta:If="IsOutlander">OutlanderDrugPolicy</drugPolicy>
        <drugPolicy meta:If="IsPirate">PirateDrugPolicy</drugPolicy>

        <foodRestriction meta:If="IsOutlander">OutlanderFood</foodRestriction>
        <foodRestriction meta:If="IsTribal">TribalFood</foodRestriction>

    </FactionDef>
</Defs>