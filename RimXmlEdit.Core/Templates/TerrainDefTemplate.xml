<?xml version="1.0" encoding="utf-8"?>
<Defs xmlns:meta="RimXmlEdit.Template"
    meta:defType="TerrainDef">

    <!-- ========================= -->
    <!--        过滤器定义区        -->
    <!-- ========================= -->
    <meta:FilterDefs>
        <meta:Filter Name="IsSoil" Desc="是否为土壤类地形（可种植，较高肥沃度）" />
        <meta:Filter Name="IsWater" Desc="是否为水体地形（不可建造、移动困难）" />
        <meta:Filter Name="IsFloor" Desc="是否为地板（人造可建造）" />
        <meta:Filter Name="IsNatural" Desc="是否为自然生成地形" />
        <meta:Filter Name="IsBuildable" Desc="是否可用于建造结构" />
        <meta:Filter Name="IsPassable" Desc="是否可通行（影响 pathCost）" />
    </meta:FilterDefs>

    <!-- ========================= -->
    <!--       TerrainDef 模板      -->
    <!-- ========================= -->
    <TerrainDef meta:Name="CustomTerrain"
        meta:Desc="自定义地形模板（可切换土壤、水体、地板、自然/人工等配置）">

        <!-- 基础信息 -->
        <defName>MyCustomTerrain</defName>
        <label>custom terrain</label>

        <texture>Terrain/MyTerrainTexture</texture>
        <renderPrecedence>200</renderPrecedence>

        <pathCost meta:If="IsPassable">1</pathCost>
        <pathCost meta:Unless="IsPassable">10000</pathCost>

        <fertility meta:If="IsSoil">1.4</fertility>
        <fertility meta:If="IsFloor">0</fertility>
        <fertility meta:If="IsWater">0</fertility>
        <fertility meta:Unless="IsSoil|IsFloor|IsWater">0.5</fertility>

        <!-- ========================= -->
        <!--         地形特性           -->
        <!-- ========================= -->

        <isWater meta:If="IsWater">true</isWater>
        <isWater meta:Unless="IsWater">false</isWater>

        <affordances>
            <!-- 可建造的地形使用 Buildable 负重 -->
            <li meta:If="IsBuildable">Heavy</li>
            <li meta:If="IsSoil">Light</li>
            <li meta:If="IsFloor">Light</li>
            <li meta:Unless="IsBuildable|IsSoil|IsFloor">None</li>
        </affordances>

        <acceptTerrainSource meta:If="IsNatural">true</acceptTerrainSource>
        <acceptTerrainSource meta:Unless="IsNatural">false</acceptTerrainSource>

        <layerable meta:If="IsFloor">true</layerable>
        <layerable meta:Unless="IsFloor">false</layerable>

        <takeSplashes meta:If="IsWater">true</takeSplashes>
        <takeSplashes meta:Unless="IsWater">false</takeSplashes>

        <!-- ========================= -->
        <!--        建筑与破坏特性       -->
        <!-- ========================= -->
        <constructEffect meta:If="IsFloor">ConstructMetal</constructEffect>
        <constructEffect meta:If="IsSoil">ConstructDig</constructEffect>
        <constructEffect meta:Unless="IsFloor|IsSoil">None</constructEffect>

        <destroyable meta:If="IsFloor">true</destroyable>
        <destroyable meta:Unless="IsFloor">false</destroyable>

        <burnedDef meta:If="IsSoil">BurnedSoil</burnedDef>
        <burnedDef meta:If="IsFloor">BurnedFloor</burnedDef>

        <scarlettable meta:If="IsNatural">true</scarlettable>
        <scarlettable meta:Unless="IsNatural">false</scarlettable>

        <!-- ========================= -->
        <!--        视觉效果设置         -->
        <!-- ========================= -->
        <color>
            <r>1.0</r>
            <g>1.0</g>
            <b>1.0</b>
        </color>

        <colorPolluted meta:If="IsNatural">
            <r>0.4</r>
            <g>0.5</g>
            <b>0.3</b>
        </colorPolluted>

        <edgeType>Smooth</edgeType>

        <!-- 雪和水交互类型 -->
        <snowWaterType meta:If="IsWater">Shallow</snowWaterType>
        <snowWaterType meta:Unless="IsWater">None</snowWaterType>

        <!-- ========================= -->
        <!--        示例特殊地形         -->
        <!-- ========================= -->

        <!-- 肥沃土壤：高肥沃度 -->
        <fertility meta:If="IsSoil">1.6</fertility>

        <!-- 石板：不可种植但可建造 -->
        <fertility meta:If="IsFloor">0</fertility>

        <!-- 水体：不可建造 -->
        <affordances>
            <li meta:If="IsWater">None</li>
        </affordances>

        <!-- 沼泽：移动困难 -->
        <pathCost meta:If="IsSoil">2</pathCost>


    </TerrainDef>
</Defs>