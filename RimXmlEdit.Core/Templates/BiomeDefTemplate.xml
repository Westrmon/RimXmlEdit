<?xml version="1.0" encoding="utf-8"?>
<Defs xmlns:meta="RimXmlEdit.Template"
    meta:defType="BiomeDef">

    <!-- ========================= -->
    <!--        过滤器定义区        -->
    <!-- ========================= -->
    <meta:FilterDefs>
        <meta:Filter Name="IsColdBiome" Desc="是否为寒冷生物群系（温度较低）" />
        <meta:Filter Name="IsHotBiome" Desc="是否为炎热生物群系（温度较高）" />
        <meta:Filter Name="IsForest" Desc="是否为森林地形（树木密度高）" />
        <meta:Filter Name="HasSwamp" Desc="是否包含沼泽地形" />
        <meta:Filter Name="IsPolluted" Desc="是否为污染生物群系（需要DLC）" />
        <meta:Filter Name="AllowsFarming" Desc="是否允许农业（肥沃度与植物密度较高）" />
    </meta:FilterDefs>

    <!-- ========================= -->
    <!--       BiomeDef 模板        -->
    <!-- ========================= -->
    <BiomeDef meta:Name="CustomBiome"
        meta:Desc="自定义生物群系模板（支持冷热、森林、沼泽、污染、农业等切换）">

        <!-- 基础信息 -->
        <defName>MyCustomBiome</defName>
        <label>custom biome</label>
        <description>A customizable biome template.</description>

        <texture>World/Biomes/MyBiomeTexture</texture>

        <animalDensity>1.0</animalDensity>
        <plantDensity meta:If="AllowsFarming">1.3</plantDensity>
        <plantDensity meta:Unless="AllowsFarming">0.6</plantDensity>

        <!-- ========================= -->
        <!--         环境特性           -->
        <!-- ========================= -->

        <temperature>
            <!-- 若为寒冷群系 -->
            <minTemp meta:If="IsColdBiome">-40</minTemp>
            <maxTemp meta:If="IsColdBiome">5</maxTemp>

            <!-- 若为炎热群系 -->
            <minTemp meta:If="IsHotBiome">15</minTemp>
            <maxTemp meta:If="IsHotBiome">45</maxTemp>

            <!-- 默认 -->
            <minTemp meta:Unless="IsColdBiome|IsHotBiome">0</minTemp>
            <maxTemp meta:Unless="IsColdBiome|IsHotBiome">25</maxTemp>
        </temperature>

        <elevation>
            <min>0</min>
            <max>5000</max>
        </elevation>

        <rainfall meta:If="IsForest">1500</rainfall>
        <rainfall meta:If="HasSwamp">2000</rainfall>
        <rainfall meta:Unless="IsForest|HasSwamp">800</rainfall>

        <swampiness meta:If="HasSwamp">0.6</swampiness>
        <swampiness meta:Unless="HasSwamp">0.1</swampiness>

        <pollution meta:If="IsPolluted">0.8</pollution>
        <pollution meta:Unless="IsPolluted">0.0</pollution>

        <!-- ========================= -->
        <!--         资源分布           -->
        <!-- ========================= -->
        <wildPlants>
            <li>
                <plant>Raspberry</plant>
                <commonality>0.3</commonality>
            </li>
            <li meta:If="AllowsFarming">
                <plant>Grass</plant>
                <commonality>0.8</commonality>
            </li>
            <li meta:If="IsForest">
                <plant>Moss</plant>
                <commonality>0.5</commonality>
            </li>
        </wildPlants>

        <wildAnimals>
            <li>
                <animal>Deer</animal>
                <commonality>0.4</commonality>
            </li>
            <li meta:If="IsColdBiome">
                <animal>Muffalo</animal>
                <commonality>0.6</commonality>
            </li>
            <li meta:If="IsHotBiome">
                <animal>Gazelle</animal>
                <commonality>0.5</commonality>
            </li>
        </wildAnimals>

        <diseases>
            <li>
                <disease>Flu</disease>
                <commonality>0.1</commonality>
            </li>
            <li meta:If="HasSwamp">
                <disease>Malaria</disease>
                <commonality>0.4</commonality>
            </li>
        </diseases>

        <allowedPackAnimals>
            <li>Muffalo</li>
            <li meta:If="IsHotBiome">Dromedary</li>
        </allowedPackAnimals>

        <!-- ========================= -->
        <!--       地形与植被设置       -->
        <!-- ========================= -->
        <terrainsByFertility>
            <li>
                <terrain>Soil</terrain>
                <minFert>0.5</minFert>
            </li>
            <li meta:If="AllowsFarming">
                <terrain>RichSoil</terrain>
                <minFert>0.8</minFert>
            </li>
        </terrainsByFertility>

        <terrainsByFertilityPolluted meta:If="IsPolluted">
            <li>
                <terrain>PollutedSoil</terrain>
                <minFert>0.3</minFert>
            </li>
        </terrainsByFertilityPolluted>

        <allowedCavePlants>
            <li>Glowstool</li>
        </allowedCavePlants>

        <tree meta:If="IsForest">Oak</tree>
        <tree meta:Unless="IsForest">None</tree>

        <!-- ========================= -->
        <!--        建筑与移动影响      -->
        <!-- ========================= -->
        <buildableByPlayer>true</buildableByPlayer>

        <constructibility>
            <value meta:If="HasSwamp">0.6</value>
            <value meta:Unless="HasSwamp">1.0</value>
        </constructibility>

        <movementDifficulty>
            <value meta:If="HasSwamp">2.0</value>
            <value meta:Unless="HasSwamp">1.0</value>
        </movementDifficulty>

    </BiomeDef>
</Defs>