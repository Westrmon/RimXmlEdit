<?xml version="1.0" encoding="utf-8"?>
<Defs xmlns:meta="RimXmlEdit.Template"
    meta:defType="BodyDef">

    <!-- =============================== -->
    <!--        可用过滤器定义区         -->
    <!-- =============================== -->
    <meta:FilterDefs>
        <meta:Filter Name="IsHumanoidBody" Desc="是否为类人生物身体结构（如人类、类人外星）。" />
        <meta:Filter Name="IsAnimalBody" Desc="是否为常规动物身体结构（如四足动物）。" />
        <meta:Filter Name="IsMechanoidBody" Desc="是否为机械体身体结构（如机械蜘蛛、机械兵）。" />
        <meta:Filter Name="HasGenders" Desc="是否具有性别区分（雄性/雌性）。" />
        <meta:Filter Name="HasAgeStages" Desc="是否具有婴儿、儿童等年龄阶段身体形态。" />
        <meta:Filter Name="HasSpecialParts" Desc="是否包含特殊结构部位，例如触手、翅膀、角等。" />
    </meta:FilterDefs>


    <!-- ================================================== -->
    <!--             自定义身体结构模板（可切换类型）       -->
    <!-- ================================================== -->
    <BodyDef meta:Name="CustomBody"
        meta:Desc="用于创建可自定义的人形、动物、机械体等不同类型身体结构的模板。">

        <!-- 基础识别信息 -->
        <defName>MyCustomBody</defName>
        <label>Custom Body</label>

        <!-- ======================================= -->
        <!--              身体基础属性                -->
        <!-- ======================================= -->

        <!-- 血液类型（机械体通常无血） -->
        <bloodDef meta:If="IsMechanoidBody">Blood_Mech</bloodDef>
        <bloodDef meta:Unless="IsMechanoidBody">Blood_Humanoid</bloodDef>

        <!-- 肉体类型 -->
        <fleshType meta:If="IsHumanoidBody">Normal</fleshType>
        <fleshType meta:If="IsAnimalBody">Animal</fleshType>
        <fleshType meta:If="IsMechanoidBody">Mechanoid</fleshType>

        <!-- 可出生、性别、年龄阶段 -->
        <canBeBorn>true</canBeBorn>

        <hasGenders meta:If="HasGenders">true</hasGenders>
        <hasGenders meta:Unless="HasGenders">false</hasGenders>

        <hasBabyBody meta:If="HasAgeStages">true</hasBabyBody>
        <hasChildBody meta:If="HasAgeStages">true</hasChildBody>


        <!-- ======================================= -->
        <!--               身体部位结构               -->
        <!-- ======================================= -->

        <!-- 核心部位 -->
        <corePart>
            <def>Torso</def>
        </corePart>

        <!-- 身体部位列表 -->
        <parts>
            <!-- 头部 -->
            <li>
                <def>Head</def>
                <group>FullHead</group>
            </li>

            <!-- 机械体可替换头部 -->
            <li meta:If="IsMechanoidBody">
                <def>MechHeadUnit</def>
                <group>FullHead</group>
            </li>

            <!-- 躯干 -->
            <li>
                <def>Torso</def>
                <group>Torso</group>
            </li>

            <!-- 四肢（根据身体类型变化） -->
            <li meta:If="IsHumanoidBody">
                <def>Arm</def>
                <group>Shoulder</group>
            </li>
            <li meta:If="IsHumanoidBody">
                <def>Leg</def>
                <group>Leg</group>
            </li>

            <li meta:If="IsAnimalBody">
                <def>FrontLeg</def>
                <group>LegFront</group>
            </li>
            <li meta:If="IsAnimalBody">
                <def>RearLeg</def>
                <group>LegRear</group>
            </li>

            <li meta:If="IsMechanoidBody">
                <def>MechLeg</def>
                <group>Leg</group>
            </li>

            <!-- 特殊部位 -->
            <li meta:If="HasSpecialParts">
                <def>SpecialAppendage</def>
                <group>Special</group>
            </li>
        </parts>

        <!-- 可插入部位（如义体插槽） -->
        <socketedParts>
            <li meta:If="IsHumanoidBody">
                <slotName>NeckSlot</slotName>
                <allowedPart>Neck</allowedPart>
            </li>

            <li meta:If="IsMechanoidBody">
                <slotName>PowerCoreSlot</slotName>
                <allowedPart>Torso</allowedPart>
            </li>
        </socketedParts>

        <!-- 可替换部位（如义肢、机械部件） -->
        <replacementParts>
            <li>
                <target>Arm</target>
                <replaces>Arm</replaces>
            </li>
            <li meta:If="IsMechanoidBody">
                <target>MechHeadUnit</target>
                <replaces>Head</replaces>
            </li>
        </replacementParts>

        <!-- 身体部位组 -->
        <bodyPartGroups>
            <li>FullHead</li>
            <li>Torso</li>
            <li meta:If="IsHumanoidBody">Shoulder</li>
            <li meta:If="IsHumanoidBody">Leg</li>
            <li meta:If="IsAnimalBody">LegFront</li>
            <li meta:If="IsAnimalBody">LegRear</li>
            <li meta:If="HasSpecialParts">Special</li>
        </bodyPartGroups>


        <!-- ======================================= -->
        <!--              死亡与掉落物相关            -->
        <!-- ======================================= -->

        <deathAction>LeaveCorpse</deathAction>

        <meatDef meta:Unless="IsMechanoidBody">Meat_Human</meatDef>
        <leatherDef meta:Unless="IsMechanoidBody">Leather_Human</leatherDef>
        <corpseDef>Corpse</corpseDef>


    </BodyDef>
</Defs>